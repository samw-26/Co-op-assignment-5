<h1 class="banner">{{title}}</h1>
<form #recordForm="ngForm" (ngSubmit)="getSubmitInfo()?.submitFunction()">
	<div class="error-container">
        @for (col of tableHeaders; track $index) {
            <div [hidden]="recordForm.controls[col]?.valid || recordForm.controls[col]?.untouched">
				<ng-container *ngIf="recordForm.controls[col]?.errors as errors">
					<div class="error-msg">
						{{col}}: {{validators.getErrorMsg(col)}}
					</div>
				</ng-container>
			</div>
        }
	</div>
	<div class="tableContainer">
        <table mat-table [dataSource]="record">
            @for (c of tableHeaders; track $index) {
                <ng-container matColumnDef={{c}}>
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>{{c}} <span class="error-msg">{{validators.isRequired(c) ? '*' : ''}}</span></th>
                    <td mat-cell *matCellDef="let row">
                        @if (validators.getColumnSchema(c)?.DATA_TYPE === 'bit') {
                            <input type="checkbox" [(ngModel)]="row[c]" name={{c}}>
                        }
                        @else {
                            <input type='text' [(ngModel)]="row[c]" name={{c}}
                            [minlength]="validators.getColMinLength(c)"
                            [maxlength]="validators.getColMaxLength(c)"
                            [required]="validators.isRequired(c)"
                            [pattern]="validators.getPattern(c)"
                            [placeholder]="placeholders[c]"
                            >
                        }
                    </td>
                </ng-container>
            }
                <tr mat-header-row *matHeaderRowDef="tableHeaders"></tr>
                <tr mat-row *matRowDef="let row; columns: tableHeaders"></tr>
        </table>
        <div class="button-container">
            <button mat-button routerLink="" type="button">Cancel</button>
            <button mat-button type="submit" [disabled]="!recordForm.valid">{{getSubmitInfo()?.name}}</button>
            <button mat-button type="button" class="del-btn" (click)="onDelete()" *ngIf="currentTableType === TableType.Details">Delete</button>
        </div>
	</div>
</form>
<!-- [disabled]="currentTableType === TableType.Details" tblservice.pKeys?.includes(col) &&  -->
<!-- [duplicateKeyValidator]="tblservice.pKeys.includes(col) ? validators: null" -->